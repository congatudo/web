<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>virtual on FreeCon.ga</title><link>https://freecon.ga/tags/virtual/</link><description>Recent content in virtual on FreeCon.ga</description><generator>Hugo -- gohugo.io</generator><lastBuildDate>Thu, 09 Dec 2021 15:30:29 +0100</lastBuildDate><atom:link href="https://freecon.ga/tags/virtual/index.xml" rel="self" type="application/rss+xml"/><item><title>Get area&amp;time in Home Assistant from Valetudo</title><link>https://freecon.ga/blog/get-area-and-time-in-ha-from-valetudo/</link><pubDate>Thu, 09 Dec 2021 15:30:29 +0100</pubDate><guid>https://freecon.ga/blog/get-area-and-time-in-ha-from-valetudo/</guid><description>Goal Get Home Assistant sensors from Valetudo to measure time and area last cleaning
Requirements Valetudo integrated into Home assistant Api Swagger available (For congatudo, just add a valid port for webui in the addon configuration) Valetudo should have a fixed IP Steps In configuration.yaml add the code below to get sensors build from the valetudo api every 5 seconds
rest:- scan_interval:5resource:&amp;#34;http://&amp;lt;ha_ip&amp;gt;:8080/api/v2/robot/state/attributes&amp;#34;sensor:- name:&amp;#34;Vacuum last clean area&amp;#34;value_template:&amp;#34;{{ value_json[4][&amp;#39;value&amp;#39;] }}&amp;#34;state_class:&amp;#34;measurement&amp;#34;json_attributes_path:&amp;#34;$[4]&amp;#34;json_attributes:- __class- metadata- type- value- name:&amp;#34;Vacuum last clean duration&amp;#34;value_template:&amp;#34;{{ value_json[3][&amp;#39;value&amp;#39;] }}&amp;#34;device_class:&amp;#34;timestamp&amp;#34;state_class:&amp;#34;total&amp;#34;json_attributes_path:&amp;#34;$[3]&amp;#34;json_attributes:- __class- metadata- type- valueNow, you have sensors for both time and area measures but just in default units, so in order to get them in human readable units, you are able to build virtual templated sensors.</description></item></channel></rss>